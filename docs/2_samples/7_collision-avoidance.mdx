---
sidebar_position: 7
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import useBaseUrl from '@docusaurus/useBaseUrl';

# 7. Collision Avoidance

<video controls width="800">
  <source src={useBaseUrl("/videos/samples/collision_avoidance/video.mp4")} type="video/mp4" />
  Your browser does not support the video tag.
</video>

*Three different entities use [`EnvironmentAvoidanceJobWrapper`](/docs/documentation-defaults/behaviors/ray-behaviors/envrionment-avoidance), [`AvoidVerticalWallsJobWrapper`](/docs/documentation-defaults/behaviors/ray-behaviors/avoid-vertical-walls) and [`AvoidGroundJobWrapper`](/docs/documentation-defaults/behaviors/ray-behaviors/avoid-ground) respectively to avoid collisions with [`Collider`](https://docs.unity3d.com/ScriptReference/Collider.html)s. The green and red arrows show the raycasts done by the [Ray Queries](/docs/documentation-core/queries/ray_queries/overview), the orange arrow shows the [desired direction](/docs/documentation-defaults/behaviors/VelocityResult).*

This is the first sample where [*Ray Behaviors*](/docs/documentation-core/behaviors/ray-behaviors/overview) are used. In the sample, entities follow [paths](/docs/documentation-defaults/utilities/path) while avoiding their environment. There are three behaviors which serve to avoid collisions - [`EnvironmentAvoidanceJobWrapper`](/docs/documentation-defaults/behaviors/ray-behaviors/envrionment-avoidance), [`AvoidGroundJobWrapper`](/docs/documentation-defaults/behaviors/ray-behaviors/avoid-ground) and [`AvoidVerticalWallsJobWrapper`](/docs/documentation-defaults/behaviors/ray-behaviors/avoid-vertical-walls). To learn more about the differences between them, visit their documentation. The behaviors use [*Ray Queries*](/docs/documentation-core/queries/ray_queries/overview) like [`ConeCreateRaysJobWrapper`](/docs/documentation-defaults/queries/ray-queries/cone-create-rays) to detect [`Collider`](https://docs.unity3d.com/ScriptReference/Collider.html)s.

![Minimal Setup folder](/img/samples/collision_avoidance/Folder.png)

-----

<Tabs>
  <TabItem value="first" label="Scene"> 

    The scene contains three entities each with one behavior to avoid collisions activated.

    <img src={useBaseUrl("/img/samples/collision_avoidance/Scene.png")} alt="Description of the image"/>
    
  </TabItem>
  
  <TabItem value="second" label="Steering System Asset"> 

    **CollisionAvoidanceSystemAsset**:
    - ***Main Tag*** - `_7_SampleTagComponent`
    - ***Simple Behaviors*** - [[`FollowPathJobWrapper`](/docs/documentation-defaults/behaviors/simple-behaviors/follow-path)]
    - ***Ray Behaviors*** - [[`EnvironmentAvoidanceJobWrapper`](/docs/documentation-defaults/behaviors/ray-behaviors/envrionment-avoidance), [`AvoidVerticalWallsJobWrapper`](/docs/documentation-defaults/behaviors/ray-behaviors/avoid-vertical-walls), [`AvoidGroundJobWrapper`](/docs/documentation-defaults/behaviors/ray-behaviors/avoid-ground)]
    - ***Prefab*** - *CollisionAvoidanceEntity*

    :::tip
      [*Ray Behaviors*](/docs/documentation-core/behaviors/ray-behaviors/overview) can be grouped by their query same as [*Neighbor Behaviors*](/docs/documentation-core/behaviors/neighbor-behaviors/intro). In this example, [`ConeCreateRaysJobWrapper`](/docs/documentation-defaults/queries/ray-queries/cone-create-rays) casts multiple rays in a cone, a second query [`DownSingleCreateRayJobWrapper`](/docs/documentation-defaults/queries/ray-queries/down-single-create-rays) casts a single ray downwards.
    :::

    **Ray Behaviors**

    <img src={useBaseUrl("/img/samples/collision_avoidance/Asset.png")} alt="Description of the image"/>

    **Simple Behaviors**

    <img src={useBaseUrl("/img/samples/collision_avoidance/Asset2.png")} alt="Description of the image"/>

  </TabItem>
  
  <TabItem value="third" label="Prefab"> 
    
    **Behavior Components**:
    - [`FollowPathAuthoring`](/docs/documentation-defaults/behaviors/simple-behaviors/follow-path#followpathcomponent)
    - [`EnvironmentAvoidanceAuthoring`](/docs/documentation-defaults/behaviors/ray-behaviors/envrionment-avoidance#environmentavoidancecomponent)
    - [`AvoidVerticalWallsAuthoring`](/docs/documentation-defaults/behaviors/ray-behaviors/avoid-vertical-walls#avoidverticalwallscomponent)
    - [`AvoidGroundAuthoring`](/docs/documentation-defaults/behaviors/ray-behaviors/avoid-ground#avoidgroundcomponent)

    **Other Components**:
    - [`SteeringEntityAuthoring`](/docs/documentation-core/base-system/steering-entity)
    - [`DesiredVelocityAuthoring`](/docs/documentation-defaults/merger#desiredvelocitycomponent)
    - [`Movement3DAuthoring`](/docs/documentation-defaults/movement/1_3D-movement)
    
    <img src={useBaseUrl("/img/samples/collision_avoidance/Prefab.png")} alt="Description of the image"/>

  </TabItem>
</Tabs>

-----